<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <script src="fabric.min.js"></script>
</head>
<body>
<canvas id="c" width="1200" height="700" style="border:1px solid #ccc"></canvas>
<video height="360" width="480" id="video1" style="display: none" muted>
    <source src="http://html5demos.com/assets/dizzy.ogv">
</video>
<video height="360" width="640" id="video2" style="display: none" muted>
    <source src="http://www.quirksmode.org/html5/videos/big_buck_bunny.ogv">
</video>
<video height="360" width="500" id="webcam" style="display: none">
</video>
<script>
    var canvas = new fabric.Canvas('c', {
        selection: false,
        selectionLineWidth: 2
    });
    var video1El = document.getElementById('video1');
    var video2El = document.getElementById('video2');
    var webcamEl = document.getElementById('webcam');
    var video1 = new fabric.Image(video1El, {
        left: 200,
        top: 300,
        angle: -15,
        originX: 'center',
        originY: 'center',
        objectCaching: false,
    });

    var video2 = new fabric.Image(video2El, {
        left: 1000,
        top: 350,
        angle: 15,
        originX: 'center',
        originY: 'center',
        objectCaching: false,
    });
    var webcam = new fabric.Image(webcamEl, {
      left: 539,
      top: 328,
      angle: 94.5,
      originX: 'center',
      originY: 'center',
      objectCaching: false,
    });
    var rect = new fabric.Rect({
        left: 100,
        top: 100,
        fill: 'red',
        width: 20,
        height: 20,
        angle: 45
    });
    let pl = new fabric.Polyline([
        {x: 10, y: 10},
        {x: 10, y: 100},
        {x: 100, y: 100},
        {x: 100, y: 10},
        {x: 10, y: 10},
        {x: 40, y: 100}
    ], {
        fill: 'transparent',
        stroke: 'red',
        left: 10,
        top: 10
    });
    canvas.add(rect, pl);
    canvas.add(video1);
    video1.getElement().play();

    canvas.add(video2);
    video2.getElement().play();
    // adding webcam video element
    navigator.mediaDevices.getUserMedia({video:true}).then(
        (stream)=> {
            window.stream = stream;
            webcamEl.srcObject=stream;
            canvas.add(webcam);
            webcam.moveTo(0);
            webcam.getElement().play();
            },
        (error)=>console.log('got media error:', error)
    );

    fabric.util.requestAnimFrame(function render() {
        canvas.renderAll();
        fabric.util.requestAnimFrame(render);
    });
</script>
</body>
</html>